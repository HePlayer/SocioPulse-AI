# MultiAI - å¤šAgentæ™ºèƒ½èŠå¤©ç³»ç»Ÿ 2025/7/15

MultiAIæ˜¯ä¸€ä¸ªåŸºäºå¤šAgentæ¶æ„çš„æ™ºèƒ½èŠå¤©ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§Agentè§’è‰²ã€å·¥å…·è°ƒç”¨ã€ä¸Šä¸‹æ–‡ç®¡ç†å’Œæµç¨‹æ§åˆ¶ã€‚

## ğŸš€ é¡¹ç›®ç‰¹æ€§

### 1. å¤šAgentæ¶æ„
- **èŠå¤©Agent**: å¤„ç†å¸¸è§„å¯¹è¯äº¤äº’
- **å·¥å…·Agent**: ä¸“é—¨è´Ÿè´£å·¥å…·è°ƒç”¨å’Œä»»åŠ¡æ‰§è¡Œ
- **åè°ƒAgent**: ç®¡ç†å¤šAgentä¹‹é—´çš„åä½œ
- **ä¸“å®¶Agent**: ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šAgentï¼ˆæ•°å­¦å®¶ã€å†å²å­¦å®¶ç­‰ï¼‰

### 2. æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†
- **ç»“æ„åŒ–ä¸Šä¸‹æ–‡**: JSONæ ¼å¼çš„ä¸Šä¸‹æ–‡ç»„ç»‡
- **è®°å¿†ç³»ç»Ÿ**: åˆ†ä¸ºä¾¿ç¬ºã€çŸ­æœŸè®°å¿†å’Œé•¿æœŸè®°å¿†
- **ä¸Šä¸‹æ–‡å‹ç¼©**: è‡ªåŠ¨å‹ç¼©é•¿ä¸Šä¸‹æ–‡ä»¥ä¼˜åŒ–æ€§èƒ½
- **æ£€ç´¢å¢å¼º**: åŸºäºHNSWç®—æ³•çš„æ™ºèƒ½è®°å¿†æ£€ç´¢

### 3. æµç¨‹æ§åˆ¶ç³»ç»Ÿ
- **æœ‰å‘å›¾æµç¨‹**: åŸºäºèŠ‚ç‚¹çš„æµç¨‹ç®¡ç†
- **æ¡ä»¶æ‰§è¡Œ**: æ”¯æŒæ¡ä»¶åˆ†æ”¯å’Œå¹¶è¡Œæ‰§è¡Œ
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- **è°ƒè¯•æ”¯æŒ**: è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—å’Œæ€§èƒ½ç›‘æ§

### 4. æ¨¡å—åŒ–è®¾è®¡
- **å¯æ‰©å±•æ¶æ„**: æ”¯æŒæ–°æ¨¡å‹å’Œå·¥å…·çš„è½»æ¾æ¥å…¥
- **æ ‡å‡†åŒ–æ¥å£**: ç»Ÿä¸€çš„ç»„ä»¶æ¥å£è®¾è®¡
- **æ’ä»¶ç³»ç»Ÿ**: æ”¯æŒè‡ªå®šä¹‰å·¥å…·å’ŒåŠŸèƒ½æ‰©å±•

## ğŸ“ é¡¹ç›®ç»“æ„

```
MultiAI/
â”œâ”€â”€ Item/                           # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ Agentlib/                   # Agentç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ Agent.py                # AgentåŸºç±»
â”‚   â”‚   â”œâ”€â”€ Models.py               # æ¨¡å‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Prompt.py               # æç¤ºè¯ç®¡ç†
â”‚   â”‚   â””â”€â”€ Tools/                  # å·¥å…·é›†åˆ
â”‚   â”‚       â”œâ”€â”€ base_tool.py        # å·¥å…·åŸºç±»
â”‚   â”‚       â”œâ”€â”€ calculator.py       # è®¡ç®—å™¨å·¥å…·
â”‚   â”‚       â”œâ”€â”€ file_tool.py        # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â”‚       â”œâ”€â”€ web_search.py       # ç½‘ç»œæœç´¢å·¥å…·
â”‚   â”‚       â””â”€â”€ code_executor.py    # ä»£ç æ‰§è¡Œå·¥å…·
â”‚   â”œâ”€â”€ ContextEngineer/            # ä¸Šä¸‹æ–‡å·¥ç¨‹æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ context_manager.py      # ä¸Šä¸‹æ–‡ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ memory_system.py        # è®°å¿†ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ scratchpad.py           # ä¾¿ç¬ºç³»ç»Ÿ
â”‚   â”œâ”€â”€ FlowTools/                  # æµç¨‹æ§åˆ¶æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ base_component.py       # åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ flow_node.py            # æµç¨‹èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ flow_engine.py          # æµç¨‹å¼•æ“
â”‚   â”‚   â”œâ”€â”€ node_factory.py         # èŠ‚ç‚¹å·¥å‚
â”‚   â”‚   â””â”€â”€ debug_logger.py         # è°ƒè¯•æ—¥å¿—å™¨
â”‚   â”œâ”€â”€ Workflow.py                 # å·¥ä½œæµç®¡ç†
â”‚   â””â”€â”€ ChatRoom.py                 # èŠå¤©å®¤ç®¡ç†
â”œâ”€â”€ Server.py                       # åç«¯æœåŠ¡å™¨
â”œâ”€â”€ MultiAI.html                    # å‰ç«¯ç•Œé¢
â”œâ”€â”€ config.yaml                     # é…ç½®æ–‡ä»¶
â””â”€â”€ README.md                       # é¡¹ç›®æ–‡æ¡£
```

## ğŸ› ï¸ æ ¸å¿ƒç»„ä»¶

### Agentç³»ç»Ÿ
- **AgentåŸºç±»**: æä¾›ç»Ÿä¸€çš„Agentæ¥å£å’ŒåŸºç¡€åŠŸèƒ½
- **è§’è‰²ç³»ç»Ÿ**: æ”¯æŒå¤šç§é¢„å®šä¹‰è§’è‰²å’Œè‡ªå®šä¹‰è§’è‰²
- **æ¶ˆæ¯ä¼ é€’**: Agenté—´çš„å¼‚æ­¥æ¶ˆæ¯é€šä¿¡
- **çŠ¶æ€ç®¡ç†**: å®Œæ•´çš„Agentç”Ÿå‘½å‘¨æœŸç®¡ç†

### ä¸Šä¸‹æ–‡å·¥ç¨‹
- **ç»“æ„åŒ–ä¸Šä¸‹æ–‡**: æ ‡å‡†åŒ–çš„ä¸Šä¸‹æ–‡æ•°æ®æ ¼å¼
- **è®°å¿†åˆ†å±‚**: ä¾¿ç¬ºã€çŸ­æœŸè®°å¿†ã€é•¿æœŸè®°å¿†çš„åˆ†å±‚ç®¡ç†
- **æ™ºèƒ½æ£€ç´¢**: åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„è®°å¿†æ£€ç´¢
- **ä¸Šä¸‹æ–‡å‹ç¼©**: åŠ¨æ€å‹ç¼©ä»¥é€‚åº”æ¨¡å‹ä¸Šä¸‹æ–‡é™åˆ¶

### æµç¨‹æ§åˆ¶
- **èŠ‚ç‚¹åŒ–æ¶æ„**: å°†æ‰€æœ‰æ“ä½œæŠ½è±¡ä¸ºæµç¨‹èŠ‚ç‚¹
- **å›¾å½¢åŒ–æµç¨‹**: æ”¯æŒå¤æ‚çš„æµç¨‹å®šä¹‰å’Œæ‰§è¡Œ
- **å¹¶è¡Œå¤„ç†**: æ”¯æŒå¤šèŠ‚ç‚¹å¹¶è¡Œæ‰§è¡Œ
- **é”™è¯¯æ¢å¤**: è‡ªåŠ¨é‡è¯•å’Œé”™è¯¯å¤„ç†æœºåˆ¶

### å·¥å…·ç³»ç»Ÿ
- **æ ‡å‡†åŒ–æ¥å£**: ç»Ÿä¸€çš„å·¥å…·å®šä¹‰å’Œè°ƒç”¨è§„èŒƒ
- **å¼‚æ­¥æ‰§è¡Œ**: æ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„å·¥å…·æ“ä½œ
- **å‚æ•°éªŒè¯**: è‡ªåŠ¨å‚æ•°éªŒè¯å’Œç±»å‹æ£€æŸ¥
- **ç»“æœç¼“å­˜**: æ™ºèƒ½çš„å·¥å…·æ‰§è¡Œç»“æœç¼“å­˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# å®‰è£…ä¾èµ–
pip install psutil asyncio

# é…ç½®APIå¯†é’¥
# ç¼–è¾‘ config.yaml æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„APIé…ç½®
```

### 2. åˆ›å»ºç¬¬ä¸€ä¸ªAgent
```python
from Item.Agentlib.Agent import Agent, AgentRole

# åˆ›å»ºèŠå¤©Agent
agent = Agent(
    agent_id="chat_agent_001",
    name="æ™ºèƒ½åŠ©æ‰‹",
    role=AgentRole.CHAT
)

# è®¾ç½®ç³»ç»Ÿæç¤ºè¯
agent.set_system_prompt("ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„AIåŠ©æ‰‹ï¼Œèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·è§£å†³å„ç§é—®é¢˜ã€‚")

# å¤„ç†ç”¨æˆ·è¾“å…¥
result = agent.think({"user_input": "ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±"})
print(result['response'])
```

### 3. å¯åŠ¨æœåŠ¡å™¨
```bash
cd MultiAI
python Server.py
```

### 4. ä½¿ç”¨å·¥å…·ç³»ç»Ÿ
```python
from Item.Agentlib.Tools.calculator import CalculatorTool

# åˆ›å»ºå’Œæ³¨å†Œå·¥å…·
calculator = CalculatorTool("calc_001")
agent.register_tool("calculator", calculator.execute, "æ•°å­¦è®¡ç®—å·¥å…·")

# ä½¿ç”¨å·¥å…·
result = agent.execute_tool("calculator", {"expression": "2 + 3 * 4"})
print(f"è®¡ç®—ç»“æœ: {result}")
```

## ğŸ“Š æ¶æ„è®¾è®¡

### äº¤äº’æœºåˆ¶
```
ç”¨æˆ·è¾“å…¥ â†’ Agent1 (åˆ†æ) â†’ ToolsAgent (å·¥å…·è°ƒç”¨) â†’ Tools (æ‰§è¡Œ) â†’ Agent1 (æ•´åˆ) â†’ ç”¨æˆ·è¾“å‡º
```

### ä¸Šä¸‹æ–‡æµè½¬
```
ç”¨æˆ·è¾“å…¥ â†’ ä¾¿ç¬ºå­˜å‚¨ â†’ ä¸Šä¸‹æ–‡æ„å»º â†’ è®°å¿†æ£€ç´¢ â†’ æ¨¡å‹è°ƒç”¨ â†’ ç»“æœå­˜å‚¨ â†’ è®°å¿†æ›´æ–°
```

### æµç¨‹æ§åˆ¶
```
å¼€å§‹èŠ‚ç‚¹ â†’ æ¡ä»¶åˆ¤æ–­ â†’ å¹¶è¡Œæ‰§è¡Œ â†’ ç»“æœèšåˆ â†’ è¾“å‡ºèŠ‚ç‚¹
```

## ğŸ¨ å‰ç«¯ç•Œé¢

### è®¾è®¡ç‰¹æ€§
- **ç®€çº¦æ¸…æ™°**: ç°ä»£åŒ–çš„UIè®¾è®¡ï¼Œæ”¯æŒæ—¥å¤œæ¨¡å¼åˆ‡æ¢
- **èŠå¤©åˆ—è¡¨**: å·¦ä¾§èŠå¤©å¯¹è±¡ç®¡ç†ï¼Œæ”¯æŒæœç´¢å’Œæ–°å»º
- **å·¥ä½œåŒº**: ä¸­å¤®å·¥ä½œåŒºåŸŸï¼Œæ”¯æŒèŠå¤©å’Œé¡¹ç›®æ¨¡å¼åˆ‡æ¢
- **æ™ºèƒ½è¾“å…¥**: åŠ¨æ€è¾“å…¥æ¡†ï¼Œæ”¯æŒå¤šè¡Œè¾“å…¥å’Œå¿«æ·æ“ä½œ

### ä¸»é¢˜ç³»ç»Ÿ
- **ç™½å¤©æ¨¡å¼**: è“ç™½é…è‰²ï¼Œæ¸…æ–°ç®€æ´
- **å¤œé—´æ¨¡å¼**: æ©™é»‘é…è‰²ï¼ŒæŠ¤çœ¼èˆ’é€‚
- **åŠ¨æ€æ•ˆæœ**: æ§ä»¶è¾¹æ¡†çš„åŠ¨æ€è‰²å½©å˜åŒ–

## ğŸ”§ é…ç½®è¯´æ˜

### config.yaml é…ç½®æ–‡ä»¶
```yaml
# æ¨¡å‹é…ç½®
models:
  openai:
    api_key: "your_openai_api_key"
    base_url: "https://api.openai.com/v1"
    model: "gpt-4"
  
  zhipu:
    api_key: "your_zhipu_api_key"
    base_url: "https://open.bigmodel.cn/api/paas/v4/"
    model: "glm-4"

# æœåŠ¡å™¨é…ç½®
server:
  host: "localhost"
  port: 8000
  debug: true

# ä¸Šä¸‹æ–‡é…ç½®
context:
  max_length: 8000
  compression_threshold: 0.95
  memory_limit: 1000

# æ—¥å¿—é…ç½®
logging:
  level: "DEBUG"
  file_enabled: true
  console_enabled: true
```

## ğŸ“ å¼€å‘æŒ‡å—

### åˆ›å»ºè‡ªå®šä¹‰Agent
```python
from Item.Agentlib.Agent import Agent, AgentRole

class CustomAgent(Agent):
    def __init__(self, agent_id: str, name: str):
        super().__init__(agent_id, name, AgentRole.CUSTOM)
    
    def _parse_response(self, response: str) -> Dict[str, Any]:
        # è‡ªå®šä¹‰å“åº”è§£æé€»è¾‘
        return super()._parse_response(response)
```

### åˆ›å»ºè‡ªå®šä¹‰å·¥å…·
```python
from Item.Agentlib.Tools.base_tool import BaseTool

class CustomTool(BaseTool):
    def __init__(self, tool_id: str):
        super().__init__(tool_id, "custom_tool")
    
    def _execute_core(self, input_data: Dict[str, Any]) -> Any:
        # å®ç°å…·ä½“çš„å·¥å…·é€»è¾‘
        return "å·¥å…·æ‰§è¡Œç»“æœ"
```

### åˆ›å»ºè‡ªå®šä¹‰æµç¨‹
```python
from Item.FlowTools.flow_node import FlowNode, NodeType

class CustomNode(FlowNode):
    def __init__(self, node_id: str):
        super().__init__(node_id, NodeType.CUSTOM)
    
    def _execute_core(self, input_data: Dict[str, Any]) -> Any:
        # å®ç°èŠ‚ç‚¹é€»è¾‘
        return {"result": "å¤„ç†å®Œæˆ"}
```

## ğŸ› è°ƒè¯•å’Œç›‘æ§

### æ—¥å¿—ç³»ç»Ÿ
- **ç»“æ„åŒ–æ—¥å¿—**: JSONæ ¼å¼çš„è¯¦ç»†æ—¥å¿—è®°å½•
- **æ€§èƒ½ç›‘æ§**: è‡ªåŠ¨è®°å½•æ‰§è¡Œæ—¶é—´å’Œèµ„æºä½¿ç”¨
- **é”™è¯¯è¿½è¸ª**: å®Œæ•´çš„é”™è¯¯å †æ ˆå’Œä¸Šä¸‹æ–‡ä¿¡æ¯

### è°ƒè¯•å·¥å…·
- **ç»„ä»¶çŠ¶æ€**: å®æ—¶æŸ¥çœ‹å„ç»„ä»¶çš„è¿è¡ŒçŠ¶æ€
- **æµç¨‹è·Ÿè¸ª**: è¯¦ç»†çš„æµç¨‹æ‰§è¡Œè½¨è¿¹
- **å†…å­˜åˆ†æ**: å†…å­˜ä½¿ç”¨æƒ…å†µç›‘æ§

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### æƒé™æ§åˆ¶
- **Agentæƒé™**: åŸºäºè§’è‰²çš„æƒé™ç®¡ç†
- **å·¥å…·æƒé™**: å·¥å…·è°ƒç”¨çš„å®‰å…¨é™åˆ¶
- **æ•°æ®éš”ç¦»**: ä¸åŒä¼šè¯çš„æ•°æ®éš”ç¦»

### æ•°æ®ä¿æŠ¤
- **æ•æ„Ÿä¿¡æ¯è¿‡æ»¤**: è‡ªåŠ¨è¯†åˆ«å’Œä¿æŠ¤æ•æ„Ÿæ•°æ®
- **ä¸Šä¸‹æ–‡æ¸…ç†**: å®šæœŸæ¸…ç†è¿‡æœŸçš„ä¸Šä¸‹æ–‡æ•°æ®
- **é”™è¯¯ä¿¡æ¯è„±æ•**: é”™è¯¯æ—¥å¿—çš„æ•æ„Ÿä¿¡æ¯ä¿æŠ¤

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å¼‚æ­¥å¤„ç†
- **å¹¶å‘æ‰§è¡Œ**: å¤šAgentå’Œå·¥å…·çš„å¹¶å‘å¤„ç†
- **å¼‚æ­¥IO**: éé˜»å¡çš„ç½‘ç»œå’Œæ–‡ä»¶æ“ä½œ
- **èµ„æºæ± **: è¿æ¥æ± å’Œçº¿ç¨‹æ± ç®¡ç†

### ç¼“å­˜ç³»ç»Ÿ
- **ç»“æœç¼“å­˜**: å·¥å…·æ‰§è¡Œç»“æœçš„æ™ºèƒ½ç¼“å­˜
- **ä¸Šä¸‹æ–‡ç¼“å­˜**: é¢‘ç¹è®¿é—®çš„ä¸Šä¸‹æ–‡æ•°æ®ç¼“å­˜
- **æ¨¡å‹ç¼“å­˜**: æ¨¡å‹å“åº”çš„æœ¬åœ°ç¼“å­˜

## ğŸ¤ è´¡çŒ®æŒ‡å—

### ä»£ç é£æ ¼
- é‡‡ç”¨é¢å‘å¯¹è±¡å’Œå‡½æ•°å¼ç¼–ç¨‹ç›¸ç»“åˆçš„æ–¹å¼
- æ‰€æœ‰æ“ä½œéƒ½å¯ä»¥ä½œä¸ºæµç¨‹èŠ‚ç‚¹æ¥å…¥
- å®Œå–„çš„ç±»å‹æ³¨è§£å’Œæ–‡æ¡£å­—ç¬¦ä¸²
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### æµ‹è¯•è¦æ±‚
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- é›†æˆæµ‹è¯•éªŒè¯æ ¸å¿ƒåŠŸèƒ½
- æ€§èƒ½æµ‹è¯•ç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§

### æäº¤è§„èŒƒ
- è¯¦ç»†çš„commit message
- ä»£ç reviewé€šè¿‡
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“š APIæ–‡æ¡£

### Agent API
- `Agent.set_system_prompt(prompt)`: è®¾ç½®ç³»ç»Ÿæç¤ºè¯
- `Agent.register_tool(name, func, desc)`: æ³¨å†Œå·¥å…·
- `Agent.think(input_data)`: å¤„ç†ç”¨æˆ·è¾“å…¥
- `Agent.execute_tool(name, args)`: æ‰§è¡Œå·¥å…·

### Context API
- `ContextManager.build_context(input)`: æ„å»ºä¸Šä¸‹æ–‡
- `ContextManager.add_exchange(user, agent)`: æ·»åŠ å¯¹è¯
- `MemorySystem.store_memory(type, content)`: å­˜å‚¨è®°å¿†
- `MemorySystem.retrieve_memories(query, k)`: æ£€ç´¢è®°å¿†

### Flow API
- `FlowEngine.create_workflow(nodes)`: åˆ›å»ºå·¥ä½œæµ
- `FlowEngine.execute_workflow(input)`: æ‰§è¡Œå·¥ä½œæµ
- `FlowNode.execute(input)`: æ‰§è¡ŒèŠ‚ç‚¹
- `NodeFactory.create_node(type, config)`: åˆ›å»ºèŠ‚ç‚¹

## ğŸ¯ æœªæ¥è®¡åˆ’

### åŠŸèƒ½æ‰©å±•
- [ ] è¯­éŸ³äº¤äº’æ”¯æŒ
- [ ] å¤šæ¨¡æ€è¾“å…¥å¤„ç†
- [ ] å®æ—¶åä½œåŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯é€‚é…

### æ€§èƒ½ä¼˜åŒ–
- [ ] åˆ†å¸ƒå¼éƒ¨ç½²æ”¯æŒ
- [ ] GPUåŠ é€Ÿè®¡ç®—
- [ ] æ›´æ™ºèƒ½çš„ç¼“å­˜ç­–ç•¥
- [ ] æµå¼è¾“å‡ºä¼˜åŒ–

### ç”Ÿæ€å»ºè®¾
- [ ] æ’ä»¶å¸‚åœº
- [ ] ç¤¾åŒºå·¥å…·åº“
- [ ] å¼€å‘è€…å·¥å…·é“¾
- [ ] åœ¨çº¿ä½“éªŒå¹³å°

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®åœ°å€: [GitHub Repository](https://github.com/yourusername/MultiAI)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/yourusername/MultiAI/issues)
- è®¨è®ºç¤¾åŒº: [Discussions](https://github.com/yourusername/MultiAI/discussions)

---

**MultiAI** - è®©AIåä½œæ›´ç®€å•ï¼Œè®©æ™ºèƒ½äº¤äº’æ›´è‡ªç„¶ã€‚
