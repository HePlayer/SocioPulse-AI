# SocioPulse-AI - å¤šAgentæ™ºèƒ½è®¨è®ºç³»ç»Ÿ

SocioPulse-AIæ˜¯ä¸€ä¸ªåŸºäºå¤šAgentæ¶æ„çš„æ™ºèƒ½è®¨è®ºç³»ç»Ÿï¼Œæ”¯æŒå•Agentå¯¹è¯å’Œå¤šAgentè¿ç»­è®¨è®ºï¼Œå…·å¤‡å®æ—¶WebSocketé€šä¿¡ã€æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†å’ŒSVRå†³ç­–æœºåˆ¶ã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### 1. å¤šAgentæ™ºèƒ½è®¨è®º ğŸ¤– âœ… **å·²å®Œæˆå®ç°**
- **å•Agentå¯¹è¯**: æ”¯æŒä¸å•ä¸ªAI Agentè¿›è¡Œæ·±åº¦å¯¹è¯äº¤äº’
- **å¤šAgentè¿ç»­è®¨è®º**: å¤šä¸ªAgentè‡ªä¸»è¿›è¡Œè¿ç»­è®¨è®ºï¼ŒåŸºäºSVRæœºåˆ¶æ™ºèƒ½å†³ç­–
- **æ™ºèƒ½Agenté€‰æ‹©**: åŸºäºè®¨è®ºä¸Šä¸‹æ–‡å’ŒAgentä¸“é•¿è‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„å‘è¨€è€…


### 2. SVRå†³ç­–æœºåˆ¶ ğŸ§  âœ… **å·²å®Œæˆå®ç°**
- **Stop-Value-Repeatè¯„ä¼°**: æ¯è½®è®¨è®ºåè¯„ä¼°æ˜¯å¦åœæ­¢ã€ç»§ç»­æˆ–é‡å¤
- **å¹¶è¡ŒSVRè®¡ç®—**: æ‰€æœ‰Agentå¹¶è¡Œè®¡ç®—SVRå€¼ï¼Œæé«˜å†³ç­–æ•ˆç‡
- **è‡ªé€‚åº”é˜ˆå€¼**: æ ¹æ®è®¨è®ºè¿›å±•åŠ¨æ€è°ƒæ•´å†³ç­–é˜ˆå€¼

### 3. å®æ—¶WebSocketé€šä¿¡ ğŸ“¡ âœ… **å·²å®Œæˆå®ç°**
- **åŒå‘å®æ—¶é€šä¿¡**: ç”¨æˆ·ä¸Agentã€Agentä¸Agentä¹‹é—´çš„å®æ—¶æ¶ˆæ¯ä¼ é€’
- **æˆ¿é—´ç®¡ç†**: æ”¯æŒå¤šä¸ªè®¨è®ºæˆ¿é—´ï¼Œæ¯ä¸ªæˆ¿é—´ç‹¬ç«‹è¿è¡Œ
- **æ¶ˆæ¯å¹¿æ’­**: æ™ºèƒ½æ¶ˆæ¯è·¯ç”±å’Œå¹¿æ’­ï¼Œç¡®ä¿æ‰€æœ‰å‚ä¸è€…å®æ—¶æ¥æ”¶æ¶ˆæ¯
- **è¿æ¥ç®¡ç†**: è‡ªåŠ¨è¿æ¥æ¢å¤ã€æ–­çº¿é‡è¿å’ŒçŠ¶æ€åŒæ­¥
- **æ¶ˆæ¯å»é‡**: é˜²æ­¢é‡å¤æ¶ˆæ¯æ˜¾ç¤ºï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒ

### 4. æ™ºèƒ½ä¸Šä¸‹æ–‡å·¥ç¨‹ç³»ç»Ÿ ğŸ§  âœ… **å·²å®Œæˆå®ç°**
- **5ä¸ªè¾“å…¥éƒ¨åˆ†ç»„ç»‡**: å¼€å‘è€…æŒ‡ä»¤ã€å†å²å¯¹è¯ã€ç”¨æˆ·è¾“å…¥ã€å·¥å…·è°ƒç”¨ç»“æœã€å¤–éƒ¨æ•°æ®æºçš„ç»“æ„åŒ–ç®¡ç†
- **3ä¸ªå­˜å‚¨ç±»åˆ«**: ä¾¿ç¬ºï¼ˆscratchpadï¼‰ã€è®°å¿†ï¼ˆmemoryï¼‰ã€å½“å‰ä¸Šä¸‹æ–‡ï¼ˆcurrent contextï¼‰çš„åˆ†å±‚å­˜å‚¨
- **ä¸‰ç§è®°å¿†ç±»å‹**: æƒ…æ™¯è®°å¿†ï¼ˆç‰¹å®šæƒ…æ™¯è¡Œä¸ºï¼‰ã€ç¨‹åºè®°å¿†ï¼ˆæ“ä½œæµç¨‹ï¼‰ã€è¯­ä¹‰è®°å¿†ï¼ˆäº‹å®çŸ¥è¯†ï¼‰
- **HNSWé«˜æ•ˆæ£€ç´¢**: åŸºäºåˆ†å±‚å°ä¸–ç•Œå›¾ç®—æ³•çš„O(log N)å‘é‡æ£€ç´¢ï¼Œæ”¯æŒè¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢
- **æ™ºèƒ½ä¸Šä¸‹æ–‡å‹ç¼©**: ä½¿ç”¨COCOMæ–¹æ³•ï¼Œè¾¾åˆ°95%é˜ˆå€¼æ—¶è‡ªåŠ¨å‹ç¼©ï¼Œä¼˜åŒ–tokenä½¿ç”¨
- **å¤šæ ¼å¼è¾“å‡º**: æ”¯æŒJSONã€Markdownã€Textä¸‰ç§æ ¼å¼çš„ä¸Šä¸‹æ–‡è¾“å‡º

### 5. æ™ºèƒ½å­˜å‚¨ç³»ç»Ÿ ğŸ’¾ âœ… **å·²å®Œæˆå®ç°**
- **å¤šå±‚çº§å­˜å‚¨æ¶æ„**: IndexedDBæŒä¹…åŒ–å­˜å‚¨ + localStorageå¿«é€Ÿç¼“å­˜ + å†…å­˜ç¼“å­˜çš„ä¸‰å±‚å­˜å‚¨ä½“ç³»
- **æ™ºèƒ½æ•°æ®ç®¡ç†**: è‡ªåŠ¨æ¶ˆæ¯ä¿å­˜ã€æ‰¹é‡å¤„ç†ã€æ•°æ®å»é‡å’Œæ™ºèƒ½ç¼“å­˜ç­–ç•¥
- **é«˜æ€§èƒ½æ£€ç´¢**: åŸºäºç´¢å¼•çš„å¿«é€Ÿæ¶ˆæ¯æ£€ç´¢ï¼Œæ”¯æŒæˆ¿é—´ã€æ—¶é—´ã€å‘é€è€…ç­‰å¤šç»´åº¦æŸ¥è¯¢
- **ç¦»çº¿æ”¯æŒ**: å®Œæ•´çš„ç¦»çº¿æ¶ˆæ¯å­˜å‚¨å’Œæ¢å¤ï¼Œç¡®ä¿æ•°æ®ä¸ä¸¢å¤±
- **æˆ¿é—´æŒä¹…åŒ–**: æœåŠ¡å™¨é‡å¯åè‡ªåŠ¨æ¢å¤èŠå¤©å®¤å’Œé…ç½®
- **äº‹ä»¶é©±åŠ¨æ¶æ„**: åŸºäºEventBusçš„æ¾è€¦åˆäº‹ä»¶ç³»ç»Ÿï¼Œæ”¯æŒå­˜å‚¨çŠ¶æ€ç›‘æ§

## ğŸ“ é¡¹ç›®ç»“æ„

```
SocioPulse-AI/
â”œâ”€â”€ UserInterface/                  # å‰ç«¯ç•Œé¢
â”‚   â”œâ”€â”€ index.html                  # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ assets/                     # èµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ css/                    # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ main.css            # ä¸»æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ components.css      # ç»„ä»¶æ ·å¼
â”‚   â”‚   â”‚   â””â”€â”€ themes.css          # ä¸»é¢˜æ ·å¼
â”‚   â”‚   â””â”€â”€ js/                     # è„šæœ¬æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ main.js             # ä¸»è„šæœ¬
â”‚   â”‚       â”œâ”€â”€ chat.js             # èŠå¤©åŠŸèƒ½
â”‚   â”‚       â”œâ”€â”€ chat-manager.js     # èŠå¤©ç®¡ç†å™¨
â”‚   â”‚       â”œâ”€â”€ websocket.js        # WebSocketé€šä¿¡
â”‚   â”‚       â”œâ”€â”€ settings.js         # è®¾ç½®ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ utils.js            # å·¥å…·å‡½æ•°
â”‚   â”‚       â””â”€â”€ storage/            # å­˜å‚¨ç³»ç»Ÿ
â”‚   â”‚           â”œâ”€â”€ storage-manager.js      # ä¸»å­˜å‚¨ç®¡ç†å™¨
â”‚   â”‚           â”œâ”€â”€ indexeddb-manager.js    # IndexedDBç®¡ç†
â”‚   â”‚           â”œâ”€â”€ localstorage-manager.js # localStorageç®¡ç†
â”‚   â”‚           â”œâ”€â”€ memory-cache.js         # å†…å­˜ç¼“å­˜
â”‚   â”‚           â”œâ”€â”€ data-models.js          # æ•°æ®æ¨¡å‹
â”‚   â”‚           â””â”€â”€ event-bus.js            # äº‹ä»¶æ€»çº¿
â”‚   â””â”€â”€ README.md                   # å‰ç«¯æ–‡æ¡£
â”œâ”€â”€ Server/                         # åç«¯æœåŠ¡å™¨
â”‚   â”œâ”€â”€ __init__.py                 # åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ main.py                     # ä¸»æœåŠ¡å™¨ç±»
â”‚   â”œâ”€â”€ config.py                   # é…ç½®å¸¸é‡
â”‚   â”œâ”€â”€ utils.py                    # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ connection_tester.py        # APIè¿æ¥æµ‹è¯•
â”‚   â”œâ”€â”€ settings_manager.py         # è®¾ç½®ç®¡ç†
â”‚   â”œâ”€â”€ websocket_handler.py        # WebSocketå¤„ç†
â”‚   â”œâ”€â”€ room_manager.py             # èŠå¤©å®¤ç®¡ç†
â”‚   â”œâ”€â”€ room_persistence.py         # æˆ¿é—´æŒä¹…åŒ–
â”‚   â””â”€â”€ discussion_framework/       # è¿ç»­è®¨è®ºæ¡†æ¶
â”‚       â”œâ”€â”€ __init__.py             # æ¡†æ¶åˆå§‹åŒ–
â”‚       â”œâ”€â”€ framework_manager.py    # æ¡†æ¶ç®¡ç†å™¨
â”‚       â”œâ”€â”€ continuous_controller.py # è¿ç»­è®¨è®ºæ§åˆ¶å™¨
â”‚       â”œâ”€â”€ parallel_svr_engine.py  # å¹¶è¡ŒSVRå¼•æ“
â”‚       â”œâ”€â”€ svr_handler.py          # SVRå¤„ç†å™¨
â”‚       â”œâ”€â”€ discussion_context.py   # è®¨è®ºä¸Šä¸‹æ–‡
â”‚       â”œâ”€â”€ agent_id_manager.py     # Agent IDç®¡ç†
â”‚       â””â”€â”€ event_interface.py      # äº‹ä»¶æ¥å£
â”œâ”€â”€ Item/                           # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ Agentlib/                   # Agentç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ Agent.py                # AgentåŸºç±»
â”‚   â”‚   â”œâ”€â”€ Models.py               # æ¨¡å‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Prompt.py               # æç¤ºè¯ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ model_manager.py        # æ¨¡å‹ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ enhanced_models.py      # å¢å¼ºæ¨¡å‹ç±»
â”‚   â”‚   â””â”€â”€ Tools/                  # å·¥å…·é›†åˆ
â”‚   â”‚       â”œâ”€â”€ base_tool.py        # å·¥å…·åŸºç±»
â”‚   â”‚       â”œâ”€â”€ calculator.py       # è®¡ç®—å™¨å·¥å…·
â”‚   â”‚       â”œâ”€â”€ file_tool.py        # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â”‚       â”œâ”€â”€ web_search.py       # ç½‘ç»œæœç´¢å·¥å…·
â”‚   â”‚       â””â”€â”€ code_executor.py    # ä»£ç æ‰§è¡Œå·¥å…·
â”‚   â”œâ”€â”€ ContextEngineer/            # ä¸Šä¸‹æ–‡å·¥ç¨‹æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ context_manager.py      # ä¸Šä¸‹æ–‡ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ memory_system.py        # è®°å¿†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ scratchpad.py           # ä¾¿ç¬ºç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ retrieval_engine.py     # æ£€ç´¢å¼•æ“
â”‚   â”‚   â”œâ”€â”€ context_compressor.py   # ä¸Šä¸‹æ–‡å‹ç¼©å™¨
â”‚   â”‚   â”œâ”€â”€ hnsw_index.py           # HNSWç´¢å¼•
â”‚   â”‚   â””â”€â”€ distance_metrics.py     # è·ç¦»åº¦é‡
â”‚   â”œâ”€â”€ Communication/              # é€šä¿¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ discussion_types.py     # è®¨è®ºç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ message_types.py        # æ¶ˆæ¯ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ FlowTools/                  # æµç¨‹æ§åˆ¶æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ base_component.py       # åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ flow_node.py            # æµç¨‹èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ flow_engine.py          # æµç¨‹å¼•æ“
â”‚   â”‚   â”œâ”€â”€ node_factory.py         # èŠ‚ç‚¹å·¥å‚
â”‚   â”‚   â””â”€â”€ debug_logger.py         # è°ƒè¯•æ—¥å¿—å™¨
â”‚   â”œâ”€â”€ Workflow.py                 # å·¥ä½œæµç®¡ç†
â”‚   â””â”€â”€ ChatRoom.py                 # èŠå¤©å®¤ç®¡ç†
â”œâ”€â”€ Server.py                       # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ config.yaml                     # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt                # Pythonä¾èµ–
â”œâ”€â”€ logs/                          # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ workspace/                     # å·¥ä½œç©ºé—´
â”‚   â””â”€â”€ rooms/                     # æˆ¿é—´æŒä¹…åŒ–å­˜å‚¨
â””â”€â”€ README.md                      # é¡¹ç›®æ–‡æ¡£
```

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **HTML5 + CSS3**: ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢è®¾è®¡
- **åŸç”ŸJavaScript**: é«˜æ€§èƒ½çš„å‰ç«¯é€»è¾‘å¤„ç†
- **WebSocket API**: å®æ—¶åŒå‘é€šä¿¡
- **IndexedDB**: å®¢æˆ·ç«¯æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- **localStorage**: å¿«é€Ÿç¼“å­˜å’Œä¼šè¯ç®¡ç†
- **å“åº”å¼è®¾è®¡**: æ”¯æŒå¤šç§è®¾å¤‡å’Œå±å¹•å°ºå¯¸

### åç«¯æŠ€æœ¯æ ˆ
- **Python 3.8+**: ä¸»è¦å¼€å‘è¯­è¨€
- **FastAPI**: é«˜æ€§èƒ½å¼‚æ­¥Webæ¡†æ¶
- **WebSocket**: å®æ—¶é€šä¿¡åè®®
- **asyncio**: å¼‚æ­¥ç¼–ç¨‹æ”¯æŒ
- **YAML**: é…ç½®æ–‡ä»¶æ ¼å¼
- **æ–‡ä»¶ç³»ç»Ÿ**: æ•°æ®æŒä¹…åŒ–å­˜å‚¨

### æ ¸å¿ƒç»„ä»¶æ¶æ„

#### Agentç³»ç»Ÿ
- **AgentåŸºç±»**: æä¾›ç»Ÿä¸€çš„Agentæ¥å£å’ŒåŸºç¡€åŠŸèƒ½
- **è§’è‰²ç³»ç»Ÿ**: æ”¯æŒå†å²å­¦å®¶ã€æ•°å­¦å®¶ã€ç¨‹åºå‘˜ç­‰ä¸“ä¸šè§’è‰²
- **æ¶ˆæ¯ä¼ é€’**: Agenté—´çš„å¼‚æ­¥æ¶ˆæ¯é€šä¿¡
- **çŠ¶æ€ç®¡ç†**: å®Œæ•´çš„Agentç”Ÿå‘½å‘¨æœŸç®¡ç†
- **æ¨¡å‹é›†æˆ**: æ”¯æŒOpenAIã€æ™ºè°±AIç­‰å¤šç§LLMå¹³å°

#### è¿ç»­è®¨è®ºæ¡†æ¶
- **æ¡†æ¶ç®¡ç†å™¨**: ç»Ÿä¸€ç®¡ç†å¤šAgentè®¨è®ºä¼šè¯
- **è¿ç»­æ§åˆ¶å™¨**: æ§åˆ¶è®¨è®ºæµç¨‹å’ŒAgentè½®æ¢
- **SVRå¼•æ“**: å¹¶è¡Œè®¡ç®—Stop-Value-Repeatå†³ç­–
- **è®¨è®ºä¸Šä¸‹æ–‡**: ç»´æŠ¤è®¨è®ºå†å²å’ŒçŠ¶æ€ä¿¡æ¯
- **äº‹ä»¶æ¥å£**: å¤„ç†è®¨è®ºè¿‡ç¨‹ä¸­çš„å„ç§äº‹ä»¶

#### WebSocketé€šä¿¡ç³»ç»Ÿ
- **è¿æ¥ç®¡ç†**: è‡ªåŠ¨è¿æ¥ã€æ–­çº¿é‡è¿ã€çŠ¶æ€åŒæ­¥
- **æ¶ˆæ¯è·¯ç”±**: æ™ºèƒ½æ¶ˆæ¯åˆ†å‘å’Œå¹¿æ’­
- **æˆ¿é—´ç®¡ç†**: å¤šæˆ¿é—´éš”ç¦»å’ŒçŠ¶æ€ç®¡ç†
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æ¢å¤æœºåˆ¶
- **æ€§èƒ½ä¼˜åŒ–**: æ¶ˆæ¯å»é‡ã€æ‰¹é‡å¤„ç†ã€è¿æ¥æ± 

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚
- **Python**: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Windowsã€macOSã€Linux
- **å†…å­˜**: å»ºè®® 4GB ä»¥ä¸Š
- **ç½‘ç»œ**: éœ€è¦è®¿é—®LLM APIæœåŠ¡ï¼ˆOpenAIã€æ™ºè°±AIç­‰ï¼‰

### 2. å®‰è£…ä¾èµ–
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/SocioPulse-AI.git
cd SocioPulse-AI

# å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt
```

### 3. é…ç½®APIå¯†é’¥
ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„APIé…ç½®ï¼š

```yaml
models:
  openai:
    api_key: "your_openai_api_key"
    base_url: "https://api.openai.com/v1"
    model: "gpt-4"

  zhipu:
    api_key: "your_zhipu_api_key"
    base_url: "https://open.bigmodel.cn/api/paas/v4/"
    model: "glm-4-flash-250414"

server:
  host: "localhost"
  port: 8000
  debug: true
```

### 4. å¯åŠ¨æœåŠ¡å™¨
```bash
# å¯åŠ¨SocioPulse-AIæœåŠ¡å™¨
python Server.py
```

æœåŠ¡å™¨å¯åŠ¨åï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š
```
ğŸš€ SocioPulse-AI Server starting...
ğŸ“¡ WebSocket server running on ws://localhost:8000/ws
ğŸŒ HTTP server running on http://localhost:8000
âœ… Server is ready!
```

### 5. è®¿é—®å‰ç«¯ç•Œé¢
æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š
```
http://localhost:8000
```

### 6. åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªè®¨è®º
1. **é…ç½®APIå¯†é’¥**: ç‚¹å‡»è®¾ç½®æŒ‰é’®ï¼Œè¾“å…¥ä½ çš„APIå¯†é’¥
2. **åˆ›å»ºèŠå¤©å®¤**: ç‚¹å‡»"æ–°å»ºèŠå¤©"ï¼Œé€‰æ‹©Agentæ•°é‡å’Œæ¨¡å‹
3. **å¼€å§‹å¯¹è¯**: å‘é€æ¶ˆæ¯å¼€å§‹ä¸Agentå¯¹è¯
4. **å¤šAgentè®¨è®º**: åˆ›å»ºå¤šAgentæˆ¿é—´ï¼Œè§‚çœ‹Agentä¹‹é—´çš„æ™ºèƒ½è®¨è®º

## ğŸ“Š ç³»ç»Ÿæ¶æ„è®¾è®¡

### å•Agentå¯¹è¯æµç¨‹
```
ç”¨æˆ·è¾“å…¥ â†’ WebSocket â†’ æˆ¿é—´ç®¡ç†å™¨ â†’ Agentå¤„ç† â†’ æ¨¡å‹è°ƒç”¨ â†’ å“åº”ç”Ÿæˆ â†’ WebSocket â†’ å‰ç«¯æ˜¾ç¤º
```

### å¤šAgentè¿ç»­è®¨è®ºæµç¨‹
```
ç”¨æˆ·è¾“å…¥ â†’ è®¨è®ºå¯åŠ¨ â†’ Agenté€‰æ‹© â†’ å¹¶è¡ŒSVRè®¡ç®— â†’ å†³ç­–åˆ¤æ–­ â†’ Agentå‘è¨€ â†’ æ¶ˆæ¯å¹¿æ’­ â†’ å¾ªç¯ç»§ç»­
```

### SVRå†³ç­–æœºåˆ¶
```
æ‰€æœ‰Agentå¹¶è¡Œè®¡ç®—SVR â†’ æ±‡æ€»ç»“æœ â†’ Deltaåˆ†æ â†’ åœæ­¢/ç»§ç»­/é‡å¤å†³ç­– â†’ ä¸‹ä¸€è½®è®¨è®º
```

### WebSocketé€šä¿¡æ¶æ„
```
å‰ç«¯ â†” WebSocketè¿æ¥ â†” æ¶ˆæ¯è·¯ç”±å™¨ â†” æˆ¿é—´ç®¡ç†å™¨ â†” Agentç³»ç»Ÿ â†” è®¨è®ºæ¡†æ¶
```

### æ•°æ®å­˜å‚¨æ¶æ„
```
å†…å­˜ç¼“å­˜ â† â†’ localStorage â† â†’ IndexedDB â† â†’ æ–‡ä»¶ç³»ç»ŸæŒä¹…åŒ–
```

## ğŸ¨ ç”¨æˆ·ç•Œé¢

### ç•Œé¢ç‰¹æ€§
- **ç°ä»£åŒ–è®¾è®¡**: ç®€çº¦æ¸…æ™°çš„UIè®¾è®¡ï¼Œæ”¯æŒæ—¥å¤œæ¨¡å¼åˆ‡æ¢
- **æˆ¿é—´ç®¡ç†**: å·¦ä¾§æˆ¿é—´åˆ—è¡¨ï¼Œæ”¯æŒåˆ›å»ºã€åˆ é™¤ã€æœç´¢èŠå¤©å®¤
- **å®æ—¶èŠå¤©**: ä¸­å¤®èŠå¤©åŒºåŸŸï¼Œå®æ—¶æ˜¾ç¤ºç”¨æˆ·å’ŒAgentæ¶ˆæ¯
- **Agentä¿¡æ¯**: æ˜¾ç¤ºAgentå¤´åƒã€åç§°å’Œè§’è‰²ä¿¡æ¯
- **è®¾ç½®é¢æ¿**: å®Œæ•´çš„APIé…ç½®å’Œç³»ç»Ÿè®¾ç½®ç®¡ç†
- **å“åº”å¼å¸ƒå±€**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸å’Œè®¾å¤‡

### ä¸»é¢˜ç³»ç»Ÿ
- **ç™½å¤©æ¨¡å¼**: è“ç™½é…è‰²ï¼Œæ¸…æ–°ç®€æ´çš„è§†è§‰ä½“éªŒ
- **å¤œé—´æ¨¡å¼**: æ©™é»‘é…è‰²ï¼ŒæŠ¤çœ¼èˆ’é€‚çš„æš—è‰²ä¸»é¢˜
- **åŠ¨æ€æ•ˆæœ**: å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»å’Œäº¤äº’åé¦ˆ
- **è‡ªé€‚åº”å…ƒç´ **: Agentåç§°æ¡†æ ¹æ®å†…å®¹é•¿åº¦è‡ªåŠ¨è°ƒæ•´

### äº¤äº’åŠŸèƒ½
- **å®æ—¶æ¶ˆæ¯**: WebSocketå®æ—¶æ¶ˆæ¯ä¼ è¾“ï¼Œæ— å»¶è¿Ÿæ˜¾ç¤º
- **æ¶ˆæ¯å»é‡**: æ™ºèƒ½é˜²é‡å¤ï¼Œç¡®ä¿æ¶ˆæ¯æ˜¾ç¤ºçš„å‡†ç¡®æ€§
- **è‡ªåŠ¨æ»šåŠ¨**: æ–°æ¶ˆæ¯è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ï¼Œä¿æŒæœ€ä½³é˜…è¯»ä½“éªŒ
- **ç¦»çº¿æ”¯æŒ**: æœ¬åœ°å­˜å‚¨ç¡®ä¿æ•°æ®ä¸ä¸¢å¤±ï¼Œæ”¯æŒç¦»çº¿æŸ¥çœ‹å†å²

## ğŸ”§ é…ç½®è¯´æ˜

### config.yaml é…ç½®æ–‡ä»¶
```yaml
# æ¨¡å‹é…ç½®
models:
  openai:
    api_key: "your_openai_api_key"
    base_url: "https://api.openai.com/v1"
    model: "gpt-4"
    max_tokens: 4000
    temperature: 0.7

  zhipu:
    api_key: "your_zhipu_api_key"
    base_url: "https://open.bigmodel.cn/api/paas/v4/"
    model: "glm-4-flash-250414"
    max_tokens: 4000
    temperature: 0.7

# æœåŠ¡å™¨é…ç½®
server:
  host: "localhost"
  port: 8000
  debug: true
  cors_origins: ["*"]
  websocket_timeout: 300

# è¿ç»­è®¨è®ºé…ç½®
discussion:
  max_agents: 10
  max_rounds: 50
  svr_threshold: 0.7
  delta_cap: 0.2
  parallel_svr: true

# å­˜å‚¨é…ç½®
storage:
  enable_persistence: true
  room_storage_path: "workspace/rooms"
  auto_save_interval: 30
  max_history_length: 1000

# ä¸Šä¸‹æ–‡å·¥ç¨‹é…ç½®
context_engineer:
  max_context_length: 8000
  compression_threshold: 0.95
  memory_types: ["episodic", "procedural", "semantic"]
  retrieval_top_k: 5

# æ—¥å¿—é…ç½®
logging:
  level: "DEBUG"
  file_enabled: true
  console_enabled: true
```

## ğŸ“ å¼€å‘æŒ‡å—

### åˆ›å»ºä¸“ä¸šAgentè§’è‰²
```python
from Item.Agentlib.Agent import Agent

# åˆ›å»ºä¸“ä¸šé¢†åŸŸAgent
def create_expert_agent(agent_id, expertise, model_config):
    agent = Agent(agent_id=agent_id)

    # è®¾ç½®ä¸“ä¸šè§’è‰²æç¤ºè¯
    system_prompt = f"""ä½ æ˜¯ä¸€ä½{expertise}ä¸“å®¶ï¼Œå…·æœ‰æ·±åšçš„ä¸“ä¸šçŸ¥è¯†å’Œä¸°å¯Œçš„å®è·µç»éªŒã€‚
    åœ¨å¤šAgentè®¨è®ºä¸­ï¼Œè¯·ä»{expertise}çš„è§’åº¦æä¾›ä¸“ä¸šè§è§£å’Œå»ºè®¾æ€§æ„è§ã€‚
    ä¿æŒå®¢è§‚ã€å‡†ç¡®ï¼Œå¹¶èƒ½å¤Ÿä¸å…¶ä»–ä¸“å®¶è¿›è¡Œé«˜è´¨é‡çš„å­¦æœ¯è®¨è®ºã€‚"""

    agent.set_system_prompt(system_prompt)
    agent.set_model_config(model_config)
    return agent

# ä½¿ç”¨ç¤ºä¾‹
historian = create_expert_agent("hist_001", "å†å²å­¦", {
    "model": "gpt-4",
    "temperature": 0.7,
    "max_tokens": 2000
})
```

### è‡ªå®šä¹‰è®¨è®ºé…ç½®
```python
# åˆ›å»ºç‰¹å®šä¸»é¢˜çš„è®¨è®ºæˆ¿é—´
discussion_config = {
    "room_name": "AIä¼¦ç†è®¨è®º",
    "agents": [
        {"role": "å“²å­¦å®¶", "model": "gpt-4"},
        {"role": "æŠ€æœ¯ä¸“å®¶", "model": "glm-4-flash"},
        {"role": "æ³•å¾‹ä¸“å®¶", "model": "gpt-4"}
    ],
    "discussion_settings": {
        "max_rounds": 30,
        "svr_threshold": 0.7,
        "enable_parallel_svr": True
    },
    "initial_topic": "äººå·¥æ™ºèƒ½åœ¨å†³ç­–ä¸­çš„ä¼¦ç†è€ƒé‡"
}
```

### æ‰©å±•SVRå†³ç­–æœºåˆ¶
```python
# è‡ªå®šä¹‰SVRè¯„ä¼°ç­–ç•¥
class CustomSVRStrategy:
    def calculate_stop_score(self, discussion_history):
        # åŸºäºè®¨è®ºå®Œæ•´æ€§è¯„ä¼°æ˜¯å¦åº”è¯¥åœæ­¢
        return stop_score

    def calculate_value_score(self, agent_response, context):
        # è¯„ä¼°Agentå“åº”çš„ä»·å€¼å’Œè´¡çŒ®
        return value_score

    def calculate_repeat_score(self, recent_messages):
        # æ£€æµ‹å†…å®¹é‡å¤ç¨‹åº¦
        return repeat_score
```

## ğŸ› è°ƒè¯•å’Œç›‘æ§

### æ—¥å¿—ç³»ç»Ÿ
- **åˆ†å±‚æ—¥å¿—**: æ”¯æŒDEBUGã€INFOã€WARNINGã€ERRORç­‰çº§åˆ«
- **å®æ—¶ç›‘æ§**: æœåŠ¡å™¨æ§åˆ¶å°å®æ—¶æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€
- **WebSocketè¯Šæ–­**: è¯¦ç»†çš„è¿æ¥çŠ¶æ€å’Œæ¶ˆæ¯ä¼ è¾“æ—¥å¿—
- **è®¨è®ºæµç¨‹è¿½è¸ª**: å®Œæ•´çš„å¤šAgentè®¨è®ºè¿‡ç¨‹è®°å½•
- **SVRå†³ç­–æ—¥å¿—**: è¯¦ç»†çš„Stop-Value-Repeatè®¡ç®—è¿‡ç¨‹

### å‰ç«¯è°ƒè¯•
```javascript
// æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹WebSocketæ¶ˆæ¯
console.log('WebSocketçŠ¶æ€:', window.wsManager?.ws?.readyState);
console.log('å½“å‰æˆ¿é—´:', window.chatManager?.currentRoomId);

// æŸ¥çœ‹å­˜å‚¨ç³»ç»ŸçŠ¶æ€
window.storageManager?.getStorageStats().then(stats => {
    console.log('å­˜å‚¨ç»Ÿè®¡:', stats);
});
```

### æœåŠ¡å™¨è°ƒè¯•
```bash
# å¯åŠ¨è°ƒè¯•æ¨¡å¼
python Server.py --debug

# æŸ¥çœ‹ç‰¹å®šæ¨¡å—æ—¥å¿—
grep "ContinuousDiscussionController" logs/server.log

# ç›‘æ§WebSocketè¿æ¥
grep "WebSocket" logs/server.log | tail -20
```
### å¸¸è§é—®é¢˜æ’æŸ¥

**é—®é¢˜1: Agentæ¶ˆæ¯ä¸æ˜¾ç¤º**
```bash
# æ£€æŸ¥WebSocketè¿æ¥çŠ¶æ€
grep "WebSocket connected" logs/server.log

# æ£€æŸ¥æ¶ˆæ¯å¹¿æ’­
grep "WebSocketå¹¿æ’­æˆåŠŸ" logs/server.log

# å‰ç«¯æ£€æŸ¥
# æµè§ˆå™¨æ§åˆ¶å°åº”è¯¥çœ‹åˆ° "ğŸ’¬ Processing new_message"
```

**é—®é¢˜2: è¿ç»­è®¨è®ºä¸å¯åŠ¨**
```bash
# æ£€æŸ¥SVRå¼•æ“çŠ¶æ€
grep "SVRå¼•æ“" logs/server.log

# æ£€æŸ¥Agenté…ç½®
grep "Agenté…ç½®" logs/server.log
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### æ•°æ®å®‰å…¨
- **APIå¯†é’¥ä¿æŠ¤**: é…ç½®æ–‡ä»¶ä¸­çš„æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨
- **æˆ¿é—´éš”ç¦»**: ä¸åŒèŠå¤©å®¤çš„æ•°æ®å®Œå…¨éš”ç¦»
- **ä¼šè¯ç®¡ç†**: è‡ªåŠ¨æ¸…ç†è¿‡æœŸçš„WebSocketè¿æ¥
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼çš„ç”¨æˆ·è¾“å…¥éªŒè¯å’Œè¿‡æ»¤

### éšç§ä¿æŠ¤
- **æœ¬åœ°å­˜å‚¨**: èŠå¤©è®°å½•ä¼˜å…ˆå­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨
- **æ•°æ®æ¸…ç†**: æ”¯æŒæ‰‹åŠ¨æ¸…ç†èŠå¤©å†å²å’Œç¼“å­˜
- **åŒ¿ååŒ–**: Agentè®¨è®ºä¸­ä¸åŒ…å«ç”¨æˆ·ä¸ªäººä¿¡æ¯

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å®æ—¶é€šä¿¡ä¼˜åŒ–
- **WebSocketè¿æ¥æ± **: é«˜æ•ˆçš„è¿æ¥ç®¡ç†å’Œå¤ç”¨
- **æ¶ˆæ¯å»é‡**: é˜²æ­¢é‡å¤æ¶ˆæ¯å½±å“æ€§èƒ½
- **æ‰¹é‡å¤„ç†**: æ¶ˆæ¯çš„æ‰¹é‡å‘é€å’Œå¤„ç†
- **è‡ªåŠ¨é‡è¿**: ç½‘ç»œä¸­æ–­æ—¶çš„è‡ªåŠ¨æ¢å¤æœºåˆ¶

### å­˜å‚¨æ€§èƒ½
- **ä¸‰å±‚å­˜å‚¨**: å†…å­˜â†’localStorageâ†’IndexedDBçš„åˆ†å±‚ç¼“å­˜
- **æ™ºèƒ½ç´¢å¼•**: åŸºäºæ—¶é—´ã€æˆ¿é—´ã€å‘é€è€…çš„å¤šç»´ç´¢å¼•
- **å¼‚æ­¥æ“ä½œ**: æ‰€æœ‰å­˜å‚¨æ“ä½œéƒ½æ˜¯å¼‚æ­¥éé˜»å¡çš„
- **æ•°æ®å‹ç¼©**: é•¿æœŸå­˜å‚¨æ•°æ®çš„æ™ºèƒ½å‹ç¼©

## ğŸ“š APIæ–‡æ¡£

### WebSocket API
```javascript
// è¿æ¥WebSocket
const ws = new WebSocket('ws://localhost:8000/ws');

// å‘é€æ¶ˆæ¯
ws.send(JSON.stringify({
    type: 'send_message',
    room_id: 'room_123',
    content: 'ä½ å¥½ï¼Œè¯·å¼€å§‹è®¨è®ºAIçš„æœªæ¥å‘å±•'
}));

// åˆ›å»ºæˆ¿é—´
ws.send(JSON.stringify({
    type: 'create_room',
    room_name: 'æŠ€æœ¯è®¨è®º',
    agents: [
        {name: 'Agent 1', model: 'gpt-4'},
        {name: 'Agent 2', model: 'glm-4-flash'}
    ]
}));
```

### å‰ç«¯å­˜å‚¨API
```javascript
// è·å–å­˜å‚¨ç®¡ç†å™¨
const storage = window.storageManager;

// ä¿å­˜æ¶ˆæ¯
await storage.saveMessage(roomId, messageData);

// è·å–æˆ¿é—´å†å²
const history = await storage.getRoomHistory(roomId);

// è·å–å­˜å‚¨ç»Ÿè®¡
const stats = await storage.getStorageStats();
```

### è¿ç»­è®¨è®ºAPI
```python
# åˆ›å»ºè®¨è®ºæ¡†æ¶
from Server.discussion_framework import FrameworkManager

framework = FrameworkManager()

# å¯åŠ¨è¿ç»­è®¨è®º
await framework.start_continuous_discussion(
    room_id="room_123",
    agents=agent_list,
    initial_message="è®¨è®ºä¸»é¢˜"
)

# åœæ­¢è®¨è®º
await framework.stop_discussion(room_id)
```




## ğŸŒŸ é¡¹ç›®äº®ç‚¹

SocioPulse-AI ä¸ä»…ä»…æ˜¯ä¸€ä¸ªèŠå¤©å·¥å…·ï¼Œæ›´æ˜¯ä¸€ä¸ª**æ™ºèƒ½è®¨è®ºç”Ÿæ€ç³»ç»Ÿ**ï¼š

- **ğŸ¤– çœŸæ­£çš„å¤šAgentæ™ºèƒ½**: ä¸æ˜¯ç®€å•çš„è½®æµå‘è¨€ï¼Œè€Œæ˜¯åŸºäºSVRæœºåˆ¶çš„æ™ºèƒ½å†³ç­–
- **ğŸ§  æ·±åº¦ä¸Šä¸‹æ–‡ç†è§£**: ä¸Šä¸‹æ–‡å·¥ç¨‹ç³»ç»Ÿï¼Œè®©Agentå…·å¤‡çœŸæ­£çš„è®°å¿†å’Œç†è§£èƒ½åŠ›
- **ğŸ’¾ æ™ºèƒ½æ•°æ®ç®¡ç†**: ä¸‰å±‚å­˜å‚¨æ¶æ„ï¼Œç¡®ä¿æ•°æ®å®‰å…¨å’Œè®¿é—®æ•ˆç‡
- **ğŸ¯ ä¸“ä¸šçº§è®¨è®º**: æ”¯æŒå­¦æœ¯è®¨è®ºã€æŠ€æœ¯è¾©è®ºã€åˆ›æ„å¤´è„‘é£æš´ç­‰å¤šç§åœºæ™¯

**SocioPulse-AI** - è®©AIåä½œæ›´æ™ºèƒ½ï¼Œè®©å¤šå…ƒè®¨è®ºæ›´æ·±å…¥ã€‚
